<app-title></app-title>
<ion-content class="ion-padding">
  <ion-row>
    <ion-col
      size="12"
      size-sm="10"
      offset-sm="1"
      size-md="8"
      offset-md="2"
      size-lg="6"
      offset-lg="3"
      size-xl="4"
      offset-xl="4"
    >
      <ion-card [formGroup]="registerForm">
        <ion-card-header>
          <ion-card-title class="ion-text-center"
            >{{'crear cuenta'}}</ion-card-title
          >
          <p class="ion-text-center error-text" *ngIf="registerError">
            {{errorMessage}}
          </p>
        </ion-card-header>
        <ion-card-content>
          <ion-item class="ion-padding-top">
            <ion-label position="stacked">Email</ion-label>
            <ion-input
              formControlName="email"
              type="email"
              placeholder="Email"
              name="email"
            ></ion-input>
          </ion-item>
          <ion-item class="ion-padding-top">
            <ion-label position="stacked">Nombre de usuario</ion-label>
            <ion-input
              formControlName="username"
              type="text"
              placeholder="Nombre de usuario"
              name="username"
            >
            </ion-input>
          </ion-item>
          <ion-item class="ion-padding-top">
            <ion-label position="stacked">Contraseña</ion-label>
            <ion-input
              #passwordEyeRegister
              [type]="passwordTypeInput"
              formControlName="password"
              placeholder="Contraseña"
              name="password"
            >
            </ion-input>
            <span slot="end">
              <ion-icon
                name="eye"
                [name]="passwordIcon"
                [ngClass]="passwordTypeInput === 'text' ? 'icon-text' : 'icon-password'"
                (click)="togglePasswordMode()"
              >
              </ion-icon>
            </span>
          </ion-item>
          <ion-label
            class="error-label"
            position="stacked"
            *ngIf="password.errors?.minlength"
            >La contraseña debe tener al menos 6 caracteres
          </ion-label>
          <ion-item class="ion-padding-top">
            <ion-label position="stacked">Repetir Contraseña</ion-label>
            <ion-input
              [type]="passwordTypeInput"
              formControlName="confirmedPassword"
              placeholder="Repetir Contraseña"
              name="confirmedPassword"
              (ionChange)="validatePassword()"
            >
            </ion-input>
          </ion-item>
          <ion-label
            class="error-label"
            position="stacked"
            *ngIf="confirmedPassword.errors?.invalid"
            >Las contraseñas deben coincidir
          </ion-label>
          <ion-button
            [disabled]="!this.registerForm.valid"
            expand="block"
            (click)="register()"
            class="ion-margin-top"
            color="toolbar"
            >Crear cuenta
          </ion-button>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-content>
